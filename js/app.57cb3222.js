(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],p=0,m=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/tp3-app-web-wlptp/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"2c40":function(e,t,r){"use strict";r("b91b")},"45c6":function(e,t,r){"use strict";(function(e){r("063a"),r("e2c0"),r("bcee"),r("e4bd"),r("b900");function n(t){var r=t.split(".")[1],n=e.from(r,"base64");return JSON.parse(n.toString())}function a(e){return n(e).exp}function i(e){return n(e).sub}function s(e){var t=n(e).exp;return!(Date.now()>=1e3*t)}t["a"]={decrypt:n,isAlive:s,getUserId:i,getExpiration:a}}).call(this,r("257d").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("5675"),r("58c3"),r("59f3"),r("3e3e");var n=r("d04a"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("NavigationBar"),r("router-view")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark"},[r("div",{staticClass:"navbar-nav mr-auto"},[r("router-link",{staticClass:"nav-link",class:{active:"Home"==e.$route.name},attrs:{to:{name:"Home"}}},[e._v("Accueil")]),e.isLoggedIn?e._e():r("router-link",{staticClass:"nav-link",class:{active:"Register"==e.$route.name},attrs:{to:{name:"Register"}}},[e._v("S'enregistrer")]),e.isLoggedIn?r("router-link",{staticClass:"nav-link",class:{active:"Profile"==e.$route.name},attrs:{to:{name:"Profile"}}},[e._v("Profile")]):e._e()],1),r("div",{staticClass:"navbar-nav ml-auto"},[e.isLoggedIn?r("b-link",{staticClass:"nav-link",on:{click:e.logout}},[e._v(" Se déconnecter ")]):r("router-link",{staticClass:"nav-link",class:{active:"Login"==e.$route.name},attrs:{to:{name:"Login"}}},[e._v(" Connexion ")])],1)])},o=[],c={computed:{isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]}},methods:{logout:function(){this.$store.dispatch("authentication/logout"),this.$router.push({name:"Login"})}}},u=c,l=r("bdd7"),p=Object(l["a"])(u,s,o,!1,null,null,null),m=p.exports,f={components:{NavigationBar:m}},d=f,h=Object(l["a"])(d,a,i,!1,null,null,null),v=h.exports,g=r("dc3b"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"container"}},[r("div",{staticClass:"row"},[r("LoginImpl")],1)]),r("router-view")],1)},b=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h1",[e._v("Connexion")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",type:"text",id:"emailInput"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",type:"password",id:"passwordInput"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary",type:"submit",id:"loginSubmit"}},[e._v("Se connecter")])],1),e.authServiceError?r("div",[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},x=[],L=r("c452"),_=(r("833b"),{created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/login",{email:e.email,password:e.password});case 2:e.authServiceError||e.$router.push({name:"Profile"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}}),y=_,O=Object(l["a"])(y,w,x,!1,null,null,null),C=O.exports,R={name:"App",components:{LoginImpl:C}},I=R,j=Object(l["a"])(I,k,b,!1,null,null,null),E=j.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"container"}},[r("div",{staticClass:"row"},[r("RegisterImpl")],1)]),r("router-view")],1)},T=[],P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[r("h1",[e._v("Créer un compte")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",type:"text",id:"emailInput"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Nom d'utilisateur")]),r("b-form-input",{attrs:{required:"",type:"text",id:"nameInput"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",type:"password",id:"passwordInput"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{type:"submit",variant:"primary",id:"registerSubmit"}},[e._v("Créer le compte")])],1),e.authServiceError?r("div",[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},S=[],U=(r("e687"),{data:function(){return{email:"",password:"",name:""}},methods:{register:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/register",{email:e.email,password:e.password,name:e.name});case 2:e.authServiceError||e.$router.push({name:"Login"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}}),N=U,z=Object(l["a"])(N,P,S,!1,null,"7044bf02",null),A=z.exports,F={name:"App",components:{RegisterImpl:A}},D=F,M=Object(l["a"])(D,$,T,!1,null,null,null),q=M.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"container"}},[r("div",{staticClass:"row"},[r("ProfileInfos")],1)]),r("router-view")],1)},H=[],J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Profile")]),r("div",[e._v("Nom: "+e._s(e.name))]),r("div",[e._v("Courriel: "+e._s(e.email))])])},Z=[],G={created:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("profile/getProfile");case 2:e.onError&&console.log("TODO: rediriger vers une page d'erreur");case 3:case"end":return t.stop()}}),t)})))()},computed:{name:function(){return this.$store.state.profile.name},email:function(){return this.$store.state.profile.email},onError:function(){return this.$store.state.profile.onError}}},K=G,Q=Object(l["a"])(K,J,Z,!1,null,null,null),V=Q.exports,W={name:"App",components:{ProfileInfos:V}},X=W,Y=Object(l["a"])(X,B,H,!1,null,null,null),ee=Y.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home container"},[r("div",{staticClass:"row g-3"},[r("park-input",{staticClass:"col-9"})],1),r("div",{staticClass:"row g-3"},[r("trail-input",{staticClass:"col"}),r("map-trail",{staticClass:"col"})],1),r("div",{staticClass:"row g-3"},[r("p",{staticClass:"col-5"}),r("Like",{staticClass:"likes col-5"})],1)])},re=[],ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.park,expression:"park"}],staticClass:"form-control",attrs:{id:"parkSelect"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.park=t.target.multiple?r:r[0]}}},e._l(e.parks,(function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(t.name)+" ")])})),0)])])])},ae=[],ie=(r("cde7"),{data:function(){return{park:{}}},created:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("parks/getParks");case 2:case"end":return t.stop()}}),t)})))()},watch:{park:function(e,t){this.$store.dispatch("parks/changeCurrentPark",e)}},computed:{parks:function(){var e=this.$store.state.parks.parkList;return e.sort((function(e,t){return e.name.localeCompare(t.name)}))}}}),se=ie,oe=Object(l["a"])(se,ne,ae,!1,null,"430a1bd4",null),ce=oe.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.trail,expression:"trail"}],staticClass:"form-select",attrs:{size:"6","aria-label":"size 6 select"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.trail=t.target.multiple?r:r[0]}}},e._l(e.trails,(function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(t.name)+" ")])})),0)])},le=[],pe={data:function(){return{trail:{}}},computed:{trails:function(){if(this.$store.state.parks.currentParkSelected){var e=this.$store.state.parks.trailList;return e.sort((function(e,t){return e.name.localeCompare(t.name)}))}return[]}},watch:{trail:function(e,t){this.$store.dispatch("trails/changeCurrentTrail",e),this.$store.dispatch("likes/getNbLikesCurrentTrail",e.id)}}},me=pe,fe=Object(l["a"])(me,ue,le,!1,null,"4a77f1f9",null),de=fe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("l-map",{staticStyle:{height:"500px",width:"600px"},attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.segments,(function(t){return r("l-polyline",{key:t.id,attrs:{"lat-lngs":t.coordinates,color:e.getDifficultyColor(t.level)}})}))],2)],1)},ve=[],ge=r("608b"),ke=r("e0fd"),be=r("5976"),we={components:{LMap:ge["a"],LTileLayer:ke["a"],LPolyline:be["a"]},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:6,center:[47.20309337289463,-71.38208892322615]}},computed:{segments:function(){return this.$store.state.trails.segments}},methods:{getDifficultyColor:function(e){switch(this.changCenter(),this.changeZoom(),"".concat(e)){case"Facile":return"green";case"Difficile":return"orange";case"Intermédiaire":return"blue";case"Très difficile":return"red";default:return"black"}},changCenter:function(){this.center=this.segments[0].coordinates[0]},changeZoom:function(){this.zoom=15}}},xe=we,Le=Object(l["a"])(xe,he,ve,!1,null,"715d8c8b",null),_e=Le.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLiked?r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.deleteLike()}}},[r("b-icon",{attrs:{icon:"heart-fill"}})],1):r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.saveLike()}}},[r("b-icon",{attrs:{icon:"heart"}})],1),r("p",{staticClass:"trailName"},[e._v(e._s(e.trailName))]),r("p",{staticClass:"parkName"},[e._v(e._s(e.parkName))]),r("p",{staticClass:"nbLike"},[e._v(e._s(e.nbLikes))])])},Oe=[],Ce=(r("8351"),r("2cba"),r("bcee"),{methods:{saveLike:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r=e.currentUserId,e.$store.dispatch("likes/addLike",{trailId:e.trailId,userId:r}),e.getLikes(),e.updateUserLikesList()}catch(n){alert("Erreur dans l'ajout du like dans la base de données")}case 1:case"end":return t.stop()}}),t)})))()},deleteLike:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.$store.dispatch("likes/removeLike",e.likeIdOfTrail),e.getLikes(),e.updateUserLikesList()}catch(r){alert("Erreur dans la suppression du like dans la base de données")}case 1:case"end":return t.stop()}}),t)})))()},getLikes:function(){this.$store.dispatch("likes/getNbLikesCurrentTrail",this.trailId)},updateUserLikesList:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["authentication/isLoggedIn"]){t.next=3;break}return t.next=3,e.$store.dispatch("likes/getCurrentUserLikesList",e.currentUserId);case 3:case"end":return t.stop()}}),t)})))()}},computed:{trailName:function(){return this.$store.state.trails.currentTrail.name},trailId:function(){return this.$store.state.trails.currentTrail.id},parkName:function(){return this.$store.state.parks.currentPark.name},nbLikes:function(){return this.$store.state.likes.currentNbLikes},isLiked:function(){return this.updateUserLikesList(),this.$store.state.likes.isLiked},currentUserId:function(){return Number(this.$store.getters["authentication/getTokenUserId"])},likeIdOfTrail:function(){var e=this;return this.$store.state.likes.currentUserLikeList.find((function(t){return t.trailId===e.trailId})).id}},created:function(){this.updateUserLikesList()}}),Re=Ce,Ie=Object(l["a"])(Re,ye,Oe,!1,null,null,null),je=Ie.exports,Ee={name:"Home",components:{ParkInput:ce,TrailInput:de,MapTrail:_e,Like:je}},$e=Ee,Te=(r("2c40"),Object(l["a"])($e,te,re,!1,null,"187c75c0",null)),Pe=Te.exports,Se=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ue=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-container"},[r("span",{staticClass:"title"},[e._v("Cette page n'existe pas...")])])}],Ne={},ze=Object(l["a"])(Ne,Se,Ue,!1,null,null,null),Ae=ze.exports,Fe=[{path:"/",name:"Home",component:Pe},{path:"/login",name:"Login",component:E},{path:"/register",name:"Register",component:q},{path:"/profile",name:"Profile",component:ee,meta:{requiresAuth:!0}},{path:"*",name:"PageNotFound",component:Ae}];n["default"].use(g["a"]);var De=new g["a"]({mode:"history",base:"/tp3-app-web-wlptp/",routes:Fe}),Me=De,qe=r("6c71"),Be="https://tp3-api.herokuapp.com.",He=r("8aad"),Je=r.n(He),Ze=r("5a19"),Ge=r("5d80"),Ke=r("7946"),Qe=r("a927"),Ve=r("e0e0"),We=(r("bfa3"),function(e){Object(Ke["a"])(r,e);var t=Object(Qe["a"])(r);function r(e,n,a){var i;return Object(Ge["a"])(this,r),i=t.call(this,e),i.codeText=n,i.code=a,i}return Object(Ze["a"])(r)}(Object(Ve["a"])(Error)));function Xe(e){if(Ye(e)){var t=new We("Erreur avec le réseau. Impossible de communiquer avec le serveur.");return t}var r=new We(e.response.data,e.response.statusText,e.response.status);return r}function Ye(e){return!!e.isAxiosError&&!e.response}function et(e){return tt.apply(this,arguments)}function tt(){return tt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Be,"/login"),{email:t.email,password:t.password});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),Xe(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),tt.apply(this,arguments)}function rt(e){return nt.apply(this,arguments)}function nt(){return nt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Be,"/register"),{email:t.email,password:t.password,name:t.name});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),Xe(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),nt.apply(this,arguments)}var at={getToken:et,registerToken:rt},it=r("45c6"),st={token:"",authServiceError:""},ot={isLoggedIn:function(e){return!!e.token},getTokenUserId:function(e){var t=it["a"].getUserId(e.token);return t}},ct={clearError:function(e){e.authServiceError=""},initializeAuthentication:function(e,t){e.token=t,e.authServiceError=""},logout:function(e){e.token=""},setAuthServiceError:function(e,t){e.authServiceError=t}},ut={login:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,at.getToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},logout:function(e){var t=e.commit;t("logout")},register:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,at.registerToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},lt={namespaced:!0,state:st,actions:ut,mutations:ct,getters:ot},pt=(r("351c"),Je.a.create({}));pt.interceptors.request.use((function(e){return rr.getters["authentication/isLoggedIn"]&&(e.headers.authorization="Bearer ".concat(rr.state.authentication.token)),e}));var mt=pt;function ft(e){return dt.apply(this,arguments)}function dt(){return dt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.get("".concat(Be,"/users/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),dt.apply(this,arguments)}var ht={getUserById:ft},vt={email:"",name:"",onError:!1},gt={},kt={initializeProfile:function(e,t){e.email=t.email,e.name=t.name,e.onError=!1},setOnError:function(e){e.onError=!0}},bt={getProfile:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,t.prev=1,a=n["authentication/getTokenUserId"],t.next=5,ht.getUserById(a);case 5:i=t.sent,r("initializeProfile",i),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r("setOnError");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},wt={namespaced:!0,state:vt,actions:bt,mutations:kt,getters:gt};function xt(){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(L["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,He["get"]("".concat(Be,"/api/parks"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function _t(e){return yt.apply(this,arguments)}function yt(){return yt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He["get"]("".concat(Be,"/api/parks/").concat(t,"/trails"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),yt.apply(this,arguments)}var Ot={getParks:xt,getTrailsForPark:_t},Ct={parkList:[],trailList:[],currentPark:{},currentParkSelected:!1,onError:!1},Rt={},It={initializeParks:function(e,t){e.parkList=t},setOnError:function(e){e.onError=!0},setCurrentPark:function(e,t){e.currentPark=t,e.currentParkSelected=!0},initializeTrailList:function(e,t){e.trailList=t}},jt={getParks:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Ot.getParks();case 4:n=t.sent,r("initializeParks",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},changeCurrentPark:function(e,t){var r=e.commit,n=e.dispatch;r("setCurrentPark",t),n("getTrailsForCurrentPark")},getTrailsForCurrentPark:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Ot.getTrailsForPark(Ct.currentPark.id);case 4:n=t.sent,r("initializeTrailList",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},Et={namespaced:!0,state:Ct,getters:Rt,actions:jt,mutations:It},$t=r("b463");r("afb7");function Tt(e){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He["get"]("".concat(Be,"/trails/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Pt.apply(this,arguments)}function St(e){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He["get"]("".concat(Be,"/api/segments/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ut.apply(this,arguments)}function Nt(e){return zt.apply(this,arguments)}function zt(){return zt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He["get"]("".concat(Be,"/api/trails/").concat(t,"/likes"));case 3:return r=e.sent,e.abrupt("return",Object.keys(r.data).length);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),zt.apply(this,arguments)}var At={getTrail:Tt,getSegment:St,getLikesFor:Nt},Ft={currentTrail:{},currentTrailSelected:!1,segments:[],onError:!1,currentUserLikesList:[]},Dt={getTrailIsLiked:function(e){return function(t){return!!e.currentUserLikesList.Find((function(e){return e.trailId===t}))}},getLikeToBeDeleted:function(e){return function(t){return e.currentUserLikesList.Find((function(e){return e.trailId===t}))}}},Mt={setCurrentTrail:function(e,t){e.currentTrail=t,e.currentTrailSelected=!0},setSegments:function(e,t){e.segments=t},setOnError:function(e){e.onError=!0}},qt={changeCurrentTrail:function(e,t){var r=e.commit,n=e.dispatch;r("setCurrentTrail",t),n("getSegmentsForCurrentTrail")},getSegmentsForCurrentTrail:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,n=[],a=Ft.currentTrail.segments,i=Object($t["a"])(a),t.prev=4,i.s();case 6:if((s=i.n()).done){t.next=15;break}return o=s.value,t.t0=n,t.next=11,At.getSegment(o);case 11:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 13:t.next=6;break;case 15:t.next=20;break;case 17:t.prev=17,t.t2=t["catch"](4),i.e(t.t2);case 20:return t.prev=20,i.f(),t.finish(20);case 23:r("setSegments",n);case 24:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()}},Bt={namespaced:!0,state:Ft,getters:Dt,actions:qt,mutations:Mt};r("adc5");function Ht(e,t){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(L["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.post("".concat(Be,"/likes"),{userId:r,trailId:t});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),Xe(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),Jt.apply(this,arguments)}function Zt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.delete("".concat(Be,"/likes/").concat(t));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),Xe(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),Gt.apply(this,arguments)}function Kt(e){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(L["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.get("".concat(Be,"/users/").concat(t,"/likes"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),Xe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Qt.apply(this,arguments)}var Vt={addLike:Ht,removeLike:Zt,getCurrentUserLikes:Kt},Wt={isLiked:!1,currentUserLikeList:[],currentNbLikes:0,onError:!1},Xt={},Yt={setCurrentNbLikes:function(e,t){e.currentNbLikes=t},setCurrentUserLikeList:function(e,t){e.currentUserLikeList=t},setIsLiked:function(e,t){e.isLiked=t}},er={getNbLikesCurrentTrail:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,r.next=3,At.getLikesFor(t);case 3:i=r.sent,a("getIsLiked",t),n("setCurrentNbLikes",i);case 6:case"end":return r.stop()}}),r)})))()},getCurrentUserLikesList:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,Vt.getCurrentUserLikes(t);case 3:return a=r.sent,r.next=6,n("setCurrentUserLikeList",a);case 6:case"end":return r.stop()}}),r)})))()},getIsLiked:function(e,t){var r=e.state,n=e.commit;n("setIsLiked",!1),r.currentUserLikeList.forEach((function(e){e.trailId===t&&n("setIsLiked",!0)}))},addLike:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.next=3,Vt.addLike(t.trailId,t.userId);case 3:n("getIsLiked",t.trailId);case 4:case"end":return r.stop()}}),r)})))()},removeLike:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,Vt.removeLike(t),n("setIsLiked",!1);case 3:case"end":return r.stop()}}),r)})))()}},tr={namespaced:!0,state:Wt,getters:Xt,actions:er,mutations:Yt};n["default"].use(qe["a"]);var rr=new qe["a"].Store({state:{},mutations:{},actions:{},modules:{authentication:lt,profile:wt,parks:Et,trails:Bt,likes:tr}}),nr=r("d422"),ar=r("8472"),ir=(r("5f3e"),r("41cf"),{welcomeMessage:"Allo tout le monde !",install:function(e){e.prototype.$getUiText=function(e){return ir[e]}}}),sr=ir,or=(r("9a6e"),r("9b4d")),cr=r.n(or);delete cr.a.Icon.Default.prototype._getIconUrl,cr.a.Icon.Default.mergeOptions({iconRetinaUrl:r("a741"),iconUrl:r("843f"),shadowUrl:r("9021")}),n["default"].use(nr["a"]),n["default"].use(ar["a"]),n["default"].use(sr),n["default"].config.productionTip=!1,new n["default"]({router:Me,store:rr,render:function(e){return e(v)}}).$mount("#app")},b91b:function(e,t,r){}});
//# sourceMappingURL=app.57cb3222.js.map